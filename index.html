Looking at your weather section code, I can identify several issues that are preventing the forecast and historical data from displaying properly:

Main Issues:

1. Missing API Key

```javascript
const weatherConfig = {
    apiKey: 'INSERT VALID API KEY HERE', // This needs to be a real API key
    baseUrl: 'https://api.weatherapi.com/v1/'
};
```

2. Incomplete Weather Data Functions

Your code has the getWeatherForecast() function but it's not being properly integrated with the display functions.

3. Missing Forecast Display Logic

You have updateForecastChart() but no functions to display the actual forecast data (daily forecasts).

4. Historical Data Not Implemented

The historical weather chart is initialized with mock data but there's no actual historical data fetching.

Here are the fixes needed:

1. Add Forecast Display Function

Add this function to display the 3-day forecast:

```javascript
function updateForecastDisplay(forecastData) {
    if (!forecastData || !forecastData.forecast) return;
    
    const forecastContainer = document.createElement('div');
    forecastContainer.className = 'row mt-3';
    
    forecastData.forecast.forecastday.forEach(day => {
        const date = new Date(day.date);
        const forecastElement = document.createElement('div');
        forecastElement.className = 'col-md-4';
        forecastElement.innerHTML = `
            <div class="card text-center">
                <div class="card-body">
                    <h6>${date.toLocaleDateString('en-AU', { weekday: 'short', month: 'short', day: 'numeric' })}</h6>
                    <i class="bi ${getWeatherIcon(day.day.condition.code)} fs-4"></i>
                    <p class="mb-1">${Math.round(day.day.maxtemp_c)}° / ${Math.round(day.day.mintemp_c)}°</p>
                    <small class="text-muted">${day.day.condition.text}</small>
                    <div class="mt-2">
                        <small>Rain: ${day.day.daily_chance_of_rain}%</small><br>
                        <small>Humidity: ${day.day.avghumidity}%</small>
                    </div>
                </div>
            </div>
        `;
        forecastContainer.appendChild(forecastElement);
    });
    
    // Add forecast to current weather card
    const currentWeatherCard = document.querySelector('#weather .card .card-body .row');
    if (currentWeatherCard && !currentWeatherCard.querySelector('.forecast-container')) {
        const forecastWrapper = document.createElement('div');
        forecastWrapper.className = 'col-12 forecast-container mt-3';
        forecastWrapper.appendChild(forecastContainer);
        currentWeatherCard.appendChild(forecastWrapper);
    }
}
```

2. Update loadWeatherData Function

Modify your loadWeatherData() function to handle forecast data:

```javascript
async function loadWeatherData() {
    // Try to get location from projects first
    const projects = db.getProjects();
    let lat, lon;
    
    // Find first project with coordinates
    const projectWithCoords = projects.find(p => p.latitude && p.longitude);
    
    if (projectWithCoords) {
        lat = projectWithCoords.latitude;
        lon = projectWithCoords.longitude;
    } else {
        // Default to Burnie, Tasmania if no project coordinates
        lat = -41.0521;
        lon = 145.9061;
    }

    // Show loading state
    document.getElementById('weather-description').textContent = 'Loading weather data...';
    document.getElementById('lastUpdate').textContent = 'Updating...';

    try {
        // Get current weather and forecast in parallel
        const [currentWeather, forecast] = await Promise.all([
            getWeatherByCoords(lat, lon),
            getWeatherForecast(lat, lon)
        ]);
        
        updateWeatherDisplay(currentWeather);
        updateForecastChart(forecast);
        updateForecastDisplay(forecast); // ADD THIS LINE
        updateEnvironmentalAlerts(currentWeather);
        
        // Store weather data for later use
        const updateTime = new Date().toLocaleTimeString();
        localStorage.setItem('lastWeatherUpdate', new Date().toISOString());
        localStorage.setItem('weatherData', JSON.stringify(currentWeather));
        localStorage.setItem('forecastData', JSON.stringify(forecast)); // Store forecast too
        document.getElementById('lastUpdate').textContent = `Last updated: ${updateTime}`;
        
    } catch (error) {
        console.error('Failed to load weather data:', error);
        document.getElementById('weather-description').textContent = 'Failed to load weather data';
        document.getElementById('lastUpdate').textContent = 'Update failed';
        
        // Try to use cached data
        const cachedData = localStorage.getItem('weatherData');
        const cachedForecast = localStorage.getItem('forecastData');
        if (cachedData) {
            const weatherData = JSON.parse(cachedData);
            updateWeatherDisplay(weatherData);
            updateEnvironmentalAlerts(weatherData);
            
            if (cachedForecast) {
                const forecastData = JSON.parse(cachedForecast);
                updateForecastChart(forecastData);
                updateForecastDisplay(forecastData);
            }
            
            document.getElementById('lastUpdate').textContent = 'Using cached data';
        } else {
            // Fallback to mock data
            loadMockWeatherData();
        }
    }
}
```

3. Add Historical Data Function

Since WeatherAPI.com requires a paid plan for historical data, you'll need to implement a fallback or use a different approach:

```javascript
async function loadHistoricalWeatherData(lat, lon) {
    // Note: Historical data requires WeatherAPI.com premium plan
    // This is a placeholder for when you have the appropriate API access
    try {
        // This would be the actual API call for historical data
        // const response = await fetch(
        //     `${weatherConfig.baseUrl}history.json?key=${weatherConfig.apiKey}&q=${lat},${lon}&dt=2024-01-01`
        // );
        
        // For now, we'll use mock data or show a message
        showHistoricalDataUnavailable();
    } catch (error) {
        console.error('Historical data not available:', error);
        showHistoricalDataUnavailable();
    }
}

function showHistoricalDataUnavailable() {
    const historicalChartContainer = document.getElementById('historicalWeatherChart');
    historicalChartContainer.innerHTML = `
        <div class="text-center p-4">
            <i class="bi bi-graph-up text-muted fs-1"></i>
            <p class="text-muted mt-2">Historical weather data requires premium API access</p>
            <small>Upgrade your WeatherAPI.com plan to access historical data</small>
        </div>
    `;
}
```

4. Update Your Weather Section HTML

Add a proper forecast section to your weather HTML:

```html
<!-- Add this after the current weather row -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">3-Day Forecast</h5>
            </div>
            <div class="card-body">
                <div id="forecast-display" class="row">
                    <!-- Forecast will be loaded here -->
                    <div class="col-12 text-center text-muted">
                        <i class="bi bi-cloud-download"></i>
                        <p class="mt-2">Loading forecast data...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
```

5. Update Your loadWeatherData Call

Make sure you're calling the updated function in your weather section navigation:

```javascript
if (target === 'weather') {
    loadWeatherData();
    setupWeatherLocationSelector();
}
```

Summary of Changes Needed:

1. Add a real WeatherAPI.com key
2. Implement the missing updateForecastDisplay() function
3. Update loadWeatherData() to handle and display forecast data
4. Add proper error handling for historical data
5. Update the HTML structure to include forecast display areas

The main issue is that you're fetching the forecast data but not displaying it anywhere in your UI. The code above should resolve these issues and show both current conditions and the 3-day forecast properly.

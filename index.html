Looking at your code, I can see the main issue! The problem is in your loadWeatherData() function - it's missing the function declaration and the async keyword. Here's what's broken:

The Issue

You have this code:

```javascript
// Enhanced loadWeatherData function for WeatherAPI.com

// Try to get location from projects first
const projects = db.getProjects();
let lat, lon;
// ... rest of the function body
```

But it should be:

```javascript
// Enhanced loadWeatherData function for WeatherAPI.com
async function loadWeatherData() {
    // Try to get location from projects first
    const projects = db.getProjects();
    let lat, lon;
    // ... rest of the function body
}
```

Here's the Fix

Replace this broken section (around line 1050 in your code):

```javascript
        // Enhanced loadWeatherData function for WeatherAPI.com
        
    // Try to get location from projects first
    const projects = db.getProjects();
    let lat, lon;
    
    // Find first project with coordinates
    const projectWithCoords = projects.find(p => p.latitude && p.longitude);
    
    if (projectWithCoords) {
        lat = projectWithCoords.latitude;
        lon = projectWithCoords.longitude;
    } else {
        // Default to Burnie, Tasmania if no project coordinates
        lat = -41.0521;
        lon = 145.9061;
    }

    // Show loading state
    document.getElementById('weather-description').textContent = 'Loading weather data...';
    document.getElementById('lastUpdate').textContent = 'Updating...';

    try {
        // Get current weather and forecast in parallel
        const [currentWeather, forecast] = await Promise.all([
            getWeatherByCoords(lat, lon),
            getWeatherForecast(lat, lon)
        ]);
        
        updateWeatherDisplay(currentWeather);
        updateForecastChart(forecast);
        updateForecastDisplay(forecast); // ADD THIS LINE
        updateEnvironmentalAlerts(currentWeather);
        
        // Store weather data for later use
        const updateTime = new Date().toLocaleTimeString();
        localStorage.setItem('lastWeatherUpdate', new Date().toISOString());
        localStorage.setItem('weatherData', JSON.stringify(currentWeather));
        localStorage.setItem('forecastData', JSON.stringify(forecast)); // Store forecast too
        document.getElementById('lastUpdate').textContent = `Last updated: ${updateTime}`;
        
    } catch (error) {
        console.error('Failed to load weather data:', error);
        document.getElementById('weather-description').textContent = 'Failed to load weather data';
        document.getElementById('lastUpdate').textContent = 'Update failed';
        
        // Try to use cached data
        const cachedData = localStorage.getItem('weatherData');
        const cachedForecast = localStorage.getItem('forecastData');
        if (cachedData) {
            const weatherData = JSON.parse(cachedData);
            updateWeatherDisplay(weatherData);
            updateEnvironmentalAlerts(weatherData);
            
            if (cachedForecast) {
                const forecastData = JSON.parse(cachedForecast);
                updateForecastChart(forecastData);
                updateForecastDisplay(forecastData);
            }
            
            document.getElementById('lastUpdate').textContent = 'Using cached data';
        } else {
            // Fallback to mock data
            loadMockWeatherData();
        }
    }
}
```

With this corrected version:

```javascript
        // Enhanced loadWeatherData function for WeatherAPI.com
        async function loadWeatherData() {
            // Try to get location from projects first
            const projects = db.getProjects();
            let lat, lon;
            
            // Find first project with coordinates
            const projectWithCoords = projects.find(p => p.latitude && p.longitude);
            
            if (projectWithCoords) {
                lat = projectWithCoords.latitude;
                lon = projectWithCoords.longitude;
            } else {
                // Default to Burnie, Tasmania if no project coordinates
                lat = -41.0521;
                lon = 145.9061;
            }

            // Show loading state
            document.getElementById('weather-description').textContent = 'Loading weather data...';
            document.getElementById('lastUpdate').textContent = 'Updating...';

            try {
                // Get current weather and forecast in parallel
                const [currentWeather, forecast] = await Promise.all([
                    getWeatherByCoords(lat, lon),
                    getWeatherForecast(lat, lon)
                ]);
                
                updateWeatherDisplay(currentWeather);
                updateForecastChart(forecast);
                updateForecastDisplay(forecast);
                updateEnvironmentalAlerts(currentWeather);
                
                // Store weather data for later use
                const updateTime = new Date().toLocaleTimeString();
                localStorage.setItem('lastWeatherUpdate', new Date().toISOString());
                localStorage.setItem('weatherData', JSON.stringify(currentWeather));
                localStorage.setItem('forecastData', JSON.stringify(forecast));
                document.getElementById('lastUpdate').textContent = `Last updated: ${updateTime}`;
                
            } catch (error) {
                console.error('Failed to load weather data:', error);
                document.getElementById('weather-description').textContent = 'Failed to load weather data';
                document.getElementById('lastUpdate').textContent = 'Update failed';
                
                // Try to use cached data
                const cachedData = localStorage.getItem('weatherData');
                const cachedForecast = localStorage.getItem('forecastData');
                if (cachedData) {
                    const weatherData = JSON.parse(cachedData);
                    updateWeatherDisplay(weatherData);
                    updateEnvironmentalAlerts(weatherData);
                    
                    if (cachedForecast) {
                        const forecastData = JSON.parse(cachedForecast);
                        updateForecastChart(forecastData);
                        updateForecastDisplay(forecastData);
                    }
                    
                    document.getElementById('lastUpdate').textContent = 'Using cached data';
                } else {
                    // Fallback to mock data
                    loadMockWeatherData();
                }
            }
        }
```

Additional Issues to Check

1. Make sure you have a valid WeatherAPI.com key in the weatherConfig object.
2. Fix the HTML structure - your forecast display div is misplaced. It should be outside the current weather row. Move this section:

```html
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">3-Day Forecast</h5>
            </div>
            <div class="card-body">
                <div id="forecast-display" class="row">
                    <!-- Forecast will be loaded here -->
                    <div class="col-12 text-center text-muted">
                        <i class="bi bi-cloud-download"></i>
                        <p class="mt-2">Loading forecast data...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
```

Place it after the closing </div> of the current weather row but before the environmental alerts column.

1. Update the updateForecastDisplay function to target the correct container:

```javascript
function updateForecastDisplay(forecastData) {
    if (!forecastData || !forecastData.forecast) return;
    
    const forecastContainer = document.getElementById('forecast-display');
    forecastContainer.innerHTML = '';
    
    forecastData.forecast.forecastday.forEach(day => {
        const date = new Date(day.date);
        const forecastElement = document.createElement('div');
        forecastElement.className = 'col-md-4';
        forecastElement.innerHTML = `
            <div class="card text-center">
                <div class="card-body">
                    <h6>${date.toLocaleDateString('en-AU', { weekday: 'short', month: 'short', day: 'numeric' })}</h6>
                    <i class="bi ${getWeatherIcon(day.day.condition.code)} fs-4"></i>
                    <p class="mb-1">${Math.round(day.day.maxtemp_c)}° / ${Math.round(day.day.mintemp_c)}°</p>
                    <small class="text-muted">${day.day.condition.text}</small>
                    <div class="mt-2">
                        <small>Rain: ${day.day.daily_chance_of_rain}%</small><br>
                        <small>Humidity: ${day.day.avghumidity}%</small>
                    </div>
                </div>
            </div>
        `;
        forecastContainer.appendChild(forecastElement);
    });
}
```

The main issue was the missing async function loadWeatherData() { declaration. Once you fix that, your weather section should start working properly!

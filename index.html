I'll help you update the weather section to use the Bureau of Meteorology (BOM) API. Here's the updated code for the weather section:

```html
<!-- Weather Section (Updated with BOM API) -->
<div id="weather" class="content-section">
    <div class="section-header">
        <h2>Weather & Environmental Data</h2>
        <p class="text-muted">Monitor weather conditions and environmental factors using BOM data</p>
    </div>
    
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">Current Weather Conditions</h5>
                    <div class="location-selector">
                        <select class="form-select form-select-sm" id="locationSelect">
                            <option value="IDT60901">Hobart</option>
                            <option value="IDT60902">Launceston</option>
                            <option value="IDT60903">Burnie</option>
                            <option value="IDT60904">Devonport</option>
                        </select>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="weather-widget">
                                <div class="weather-icon" id="weather-icon">
                                    <i class="bi bi-cloud-sun"></i>
                                </div>
                                <h3 id="current-temp">--°C</h3>
                                <p id="weather-description">Select location to load data</p>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <small>Humidity</small>
                                        <p id="humidity">--%</p>
                                    </div>
                                    <div>
                                        <small>Wind</small>
                                        <p id="wind-speed">-- km/h</p>
                                    </div>
                                    <div>
                                        <small>Pressure</small>
                                        <p id="pressure">-- hPa</p>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small id="last-updated" class="text-light">Last updated: --</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="chart-container">
                                <canvas id="temperatureChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Weather Forecast</h5>
                </div>
                <div class="card-body">
                    <div id="weather-forecast">
                        <div class="text-center text-muted">
                            <p>Select location to view forecast</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Historical Weather Data</h5>
                </div>
                <div class="card-body">
                    <div class="chart-container" style="height: 400px;">
                        <canvas id="historicalWeatherChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
```

And here's the updated JavaScript function to fetch data from the BOM API:

```javascript
function loadWeatherData() {
    const locationSelect = document.getElementById('locationSelect');
    const selectedLocation = locationSelect.value;
    
    // BOM API endpoints for Tasmania locations
    const bomEndpoints = {
        'IDT60901': 'http://www.bom.gov.au/fwo/IDT60901/IDT60901.94970.json', // Hobart
        'IDT60902': 'http://www.bom.gov.au/fwo/IDT60901/IDT60901.94968.json', // Launceston
        'IDT60903': 'http://www.bom.gov.au/fwo/IDT60901/IDT60901.94967.json', // Burnie
        'IDT60904': 'http://www.bom.gov.au/fwo/IDT60901/IDT60901.94969.json'  // Devonport
    };
    
    fetchWeatherData(bomEndpoints[selectedLocation]);
    
    // Add event listener for location changes
    locationSelect.addEventListener('change', function() {
        fetchWeatherData(bomEndpoints[this.value]);
    });
}

function fetchWeatherData(apiUrl) {
    // Show loading state
    document.getElementById('current-temp').textContent = 'Loading...';
    document.getElementById('weather-description').textContent = 'Fetching data from BOM';
    
    // Use a proxy to handle CORS issues
    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
    
    fetch(proxyUrl + apiUrl)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            updateWeatherDisplay(data);
        })
        .catch(error => {
            console.error('Error fetching weather data:', error);
            showToast('Weather Error', 'Unable to fetch weather data from BOM', 'error');
            // Fallback to mock data
            loadMockWeatherData();
        });
}

function updateWeatherDisplay(weatherData) {
    try {
        // BOM data structure varies, but we try to extract common elements
        const observations = weatherData.observations;
        if (!observations || !observations.data || observations.data.length === 0) {
            throw new Error('No observation data available');
        }
        
        const latestObservation = observations.data[0];
        
        // Update current weather
        document.getElementById('current-temp').textContent = `${latestObservation.air_temp}°C`;
        document.getElementById('weather-description').textContent = getWeatherDescription(latestObservation);
        document.getElementById('humidity').textContent = `${latestObservation.rel_hum || '--'}%`;
        document.getElementById('wind-speed').textContent = `${latestObservation.wind_spd_kmh || '--'} km/h`;
        document.getElementById('pressure').textContent = `${latestObservation.press || '--'} hPa`;
        
        // Update weather icon
        updateWeatherIcon(latestObservation);
        
        // Update last updated time
        const lastUpdated = new Date(latestObservation.local_date_time_full).toLocaleString();
        document.getElementById('last-updated').textContent = `Last updated: ${lastUpdated}`;
        
        // Update forecast display
        updateForecastDisplay(latestObservation);
        
        // Update charts
        updateWeatherCharts(weatherData);
        
    } catch (error) {
        console.error('Error processing weather data:', error);
        showToast('Data Error', 'Error processing weather data', 'error');
        loadMockWeatherData();
    }
}

function getWeatherDescription(observation) {
    if (observation.rain_trace > 0) {
        return 'Rain';
    } else if (observation.cloud_oktas >= 6) {
        return 'Cloudy';
    } else if (observation.cloud_oktas >= 3) {
        return 'Partly Cloudy';
    } else {
        return 'Clear';
    }
}

function updateWeatherIcon(observation) {
    const iconElement = document.getElementById('weather-icon');
    iconElement.innerHTML = '';
    
    let iconClass = 'bi-cloud-sun'; // default
    
    if (observation.rain_trace > 0) {
        iconClass = 'bi-cloud-rain';
    } else if (observation.cloud_oktas >= 6) {
        iconClass = 'bi-cloud';
    } else if (observation.cloud_oktas >= 3) {
        iconClass = 'bi-cloud-sun';
    } else {
        iconClass = 'bi-sun';
    }
    
    const icon = document.createElement('i');
    icon.className = `bi ${iconClass}`;
    iconElement.appendChild(icon);
}

function updateForecastDisplay(observation) {
    const forecastContainer = document.getElementById('weather-forecast');
    
    // BOM doesn't provide forecast in the same API, so we'll show extended current data
    forecastContainer.innerHTML = `
        <div class="forecast-item mb-3">
            <div class="d-flex justify-content-between">
                <span>Current Temperature</span>
                <strong>${observation.air_temp}°C</strong>
            </div>
        </div>
        <div class="forecast-item mb-3">
            <div class="d-flex justify-content-between">
                <span>Apparent Temperature</span>
                <strong>${observation.apparent_t || observation.air_temp}°C</strong>
            </div>
        </div>
        <div class="forecast-item mb-3">
            <div class="d-flex justify-content-between">
                <span>Dew Point</span>
                <strong>${observation.dewpt || '--'}°C</strong>
            </div>
        </div>
        <div class="forecast-item">
            <div class="d-flex justify-content-between">
                <span>Wind Direction</span>
                <strong>${observation.wind_dir || '--'}</strong>
            </div>
        </div>
    `;
}

function updateWeatherCharts(weatherData) {
    const observations = weatherData.observations.data.slice(0, 24); // Last 24 hours
    
    // Update temperature chart
    if (temperatureChart) temperatureChart.destroy();
    
    temperatureChart = new Chart(document.getElementById('temperatureChart'), {
        type: 'line',
        data: {
            labels: observations.map(obs => {
                const date = new Date(obs.local_date_time_full);
                return date.toLocaleTimeString('en-AU', { hour: '2-digit', minute: '2-digit' });
            }).reverse(),
            datasets: [{
                label: 'Temperature (°C)',
                data: observations.map(obs => obs.air_temp).reverse(),
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    });
    
    // Update historical weather chart with available data
    if (historicalWeatherChart) historicalWeatherChart.destroy();
    
    // For historical data, we'll use the available observations
    const tempData = observations.map(obs => obs.air_temp);
    const pressureData = observations.map(obs => obs.press);
    
    historicalWeatherChart = new Chart(document.getElementById('historicalWeatherChart'), {
        type: 'line',
        data: {
            labels: observations.map(obs => {
                const date = new Date(obs.local_date_time_full);
                return date.toLocaleString('en-AU', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    day: '2-digit',
                    month: '2-digit'
                });
            }).reverse(),
            datasets: [
                {
                    label: 'Temperature (°C)',
                    data: tempData.reverse(),
                    borderColor: 'rgb(255, 99, 132)',
                    backgroundColor: 'rgba(255, 99, 132, 0.1)',
                    yAxisID: 'y',
                    tension: 0.4
                },
                {
                    label: 'Pressure (hPa)',
                    data: pressureData.reverse(),
                    borderColor: 'rgb(54, 162, 235)',
                    backgroundColor: 'rgba(54, 162, 235, 0.1)',
                    yAxisID: 'y1',
                    tension: 0.4
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    type: 'linear',
                    display: true,
                    position: 'left',
                    title: {
                        display: true,
                        text: 'Temperature (°C)'
                    }
                },
                y1: {
                    type: 'linear',
                    display: true,
                    position: 'right',
                    title: {
                        display: true,
                        text: 'Pressure (hPa)'
                    },
                    grid: {
                        drawOnChartArea: false
                    }
                }
            }
        }
    });
}

// Fallback function if BOM API fails
function loadMockWeatherData() {
    document.getElementById('current-temp').textContent = '18°C';
    document.getElementById('weather-description').textContent = 'Partly Cloudy';
    document.getElementById('humidity').textContent = '65%';
    document.getElementById('wind-speed').textContent = '12 km/h';
    document.getElementById('pressure').textContent = '1015 hPa';
    document.getElementById('last-updated').textContent = 'Last updated: Using mock data';
    
    // Load mock charts (keep your existing mock chart code here)
    if (temperatureChart) temperatureChart.destroy();
    
    temperatureChart = new Chart(document.getElementById('temperatureChart'), {
        type: 'line',
        data: {
            labels: ['6 AM', '9 AM', '12 PM', '3 PM', '6 PM', '9 PM'],
            datasets: [{
                label: 'Temperature (°C)',
                data: [12, 15, 18, 19, 17, 14],
                borderColor: 'rgb(255, 99, 132)',
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    });
    
    // Update the navigation event listener to include weather initialization
    document.querySelectorAll('.sidebar .nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // ... existing navigation code ...
            
            if (target === 'weather') {
                loadWeatherData(); // Initialize weather data when section is shown
            }
        });
    });
}
```

Key changes made:

1. Added location selector - Users can choose between major Tasmanian locations
2. Integrated BOM API endpoints - Using actual BOM observation data for Tasmania
3. Proper error handling - Falls back to mock data if API fails
4. CORS proxy - Added a proxy to handle cross-origin requests
5. Real-time data display - Shows actual temperature, humidity, wind speed, and pressure
6. Weather icons - Dynamic icons based on current conditions
7. Historical charts - Uses actual observation data for charts

Important notes:

1. CORS Issues: The BOM API might have CORS restrictions, so I've included a proxy. You might need to set up your own proxy server for production use.
2. API Structure: The BOM API structure can vary, so you may need to adjust the data parsing based on the actual response format.
3. Rate Limiting: Be mindful of API rate limits when making frequent requests.
4. Fallback: The code includes a fallback to mock data if the API fails, ensuring the application remains functional.

To use this, simply replace your existing weather section and the loadWeatherData() function with the code above. The weather data will automatically load when users select the weather section or change locations.

I can see the issue! There's a duplicate function definition at the end of your calculateRetirementExpensesWithDependents function. You have the function defined twice with the same code repeated. Here's the fix:

FIND THIS SECTION (around line 1050):

```javascript
// Fixed: Enhanced expense calculation for retirement scenarios
function calculateRetirementExpensesWithDependents(scenarioAge, currentAge, currentExpenses, retirementExpenseRate, 
                                                 dependents, educationCosts, annualChildCost, inflationRate) {
    const yearsToRetirement = scenarioAge - currentAge;
    const currentYear = new Date().getFullYear();
    const retirementYear = currentYear + yearsToRetirement;
    
    const baseHouseholdExpenses = currentExpenses - (dependents.length * annualChildCost) - educationCosts;
    
    // FIXED: Properly calculate which dependents will still be at home at retirement
    const dependentsAtRetirement = dependents.filter(dep => {
        const ageAtRetirement = dep.age + yearsToRetirement;
        // A dependent is considered "at home" if they haven't reached their supportUntil age
        // AND they're still in education or below typical leaving age (usually 18-22)
        return ageAtRetirement < dep.supportUntil;
    });
    
    // FIXED: Calculate remaining education costs more accurately
    let remainingEducationCosts = 0;
    dependents.forEach(dep => {
        const ageAtRetirement = dep.age + yearsToRetirement;
        
        // Only count education costs if the dependent is still in education at retirement
        if (ageAtRetirement < dep.supportUntil) {
            if (dep.educationType === 'secondary' && ageAtRetirement < 18) {
                // Full secondary education costs
                remainingEducationCosts += educationCosts / dependents.length;
            } else if ((dep.educationType === 'university' || dep.educationType === 'tafe') && ageAtRetirement < dep.supportUntil) {
                // Tertiary education costs (typically lower than full household costs)
                remainingEducationCosts += (educationCosts / dependents.length) * 0.7;
            }
        }
    });
    
    let retirementExpenses = baseHouseholdExpenses * (retirementExpenseRate / 100);
    retirementExpenses += (dependentsAtRetirement.length * annualChildCost);
    retirementExpenses += remainingEducationCosts;
    
    retirementExpenses = calculateInflationAdjustedValue(retirementExpenses, yearsToRetirement, inflationRate);
    
    return {
        retirementExpenses: retirementExpenses,
        dependentsAtRetirement: dependentsAtRetirement,
        remainingEducationCosts: remainingEducationCosts
    };
}
        
        let retirementExpenses = baseHouseholdExpenses * (retirementExpenseRate / 100);
        retirementExpenses += (dependentsAtRetirement.length * annualChildCost);
        retirementExpenses += remainingEducationCosts;
        
        retirementExpenses = calculateInflationAdjustedValue(retirementExpenses, yearsToRetirement, inflationRate);
        
        return {
            retirementExpenses: retirementExpenses,
            dependentsAtRetirement: dependentsAtRetirement,
            remainingEducationCosts: remainingEducationCosts
        };
    }
```

REPLACE IT WITH THIS (remove the duplicate code):

```javascript
// Fixed: Enhanced expense calculation for retirement scenarios
function calculateRetirementExpensesWithDependents(scenarioAge, currentAge, currentExpenses, retirementExpenseRate, 
                                                 dependents, educationCosts, annualChildCost, inflationRate) {
    const yearsToRetirement = scenarioAge - currentAge;
    const currentYear = new Date().getFullYear();
    const retirementYear = currentYear + yearsToRetirement;
    
    const baseHouseholdExpenses = currentExpenses - (dependents.length * annualChildCost) - educationCosts;
    
    // FIXED: Properly calculate which dependents will still be at home at retirement
    const dependentsAtRetirement = dependents.filter(dep => {
        const ageAtRetirement = dep.age + yearsToRetirement;
        // A dependent is considered "at home" if they haven't reached their supportUntil age
        // AND they're still in education or below typical leaving age (usually 18-22)
        return ageAtRetirement < dep.supportUntil;
    });
    
    // FIXED: Calculate remaining education costs more accurately
    let remainingEducationCosts = 0;
    dependents.forEach(dep => {
        const ageAtRetirement = dep.age + yearsToRetirement;
        
        // Only count education costs if the dependent is still in education at retirement
        if (ageAtRetirement < dep.supportUntil) {
            if (dep.educationType === 'secondary' && ageAtRetirement < 18) {
                // Full secondary education costs
                remainingEducationCosts += educationCosts / dependents.length;
            } else if ((dep.educationType === 'university' || dep.educationType === 'tafe') && ageAtRetirement < dep.supportUntil) {
                // Tertiary education costs (typically lower than full household costs)
                remainingEducationCosts += (educationCosts / dependents.length) * 0.7;
            }
        }
    });
    
    let retirementExpenses = baseHouseholdExpenses * (retirementExpenseRate / 100);
    retirementExpenses += (dependentsAtRetirement.length * annualChildCost);
    retirementExpenses += remainingEducationCosts;
    
    retirementExpenses = calculateInflationAdjustedValue(retirementExpenses, yearsToRetirement, inflationRate);
    
    return {
        retirementExpenses: retirementExpenses,
        dependentsAtRetirement: dependentsAtRetirement,
        remainingEducationCosts: remainingEducationCosts
    };
}
```

The problem is that you have the same function code duplicated at the end - the second block starting with let retirementExpenses = baseHouseholdExpenses * (retirementExpenseRate / 100); is redundant and causing the syntax error.

Just delete that duplicate section and your code should work properly!
